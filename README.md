# themizer

Provide a design-like scheme (with design tokens and aliases) to have its values generated as CSS custom properties and a JavaScript object to be used in your app as a reference.

## Installation

```bash
pnpm add themizer@latest
``` 

## API

```ts
import themizer, { unwrapAtom, resolveAtom } from "themizer";

const { aliases, medias, tokens } = themizer({ prefix?, medias, tokens }, aliases);

const unwrapedAtom = unwrapAtom(aliases[key] /* or tokens[key] */);

const resolvedAtom = resolveAtom(aliases[key] /* or tokens[key] */)
```

### themizer

#### Parameters

|Property|Type|Default|Description|
|-|-|-|-|
|options.tokens|`Object`|_Required_|Object to generate `theme.rules` and compose `aliases` as parameter, and `theme.tokens` as a JavaScript reference|
|options.medias|`Object`|_Required_|Object with values as media queries and key as its own aliases to replace the responsive properties in the `aliases` object values. It's also accessed throught `theme.medias` as it is as a JavaScript reference| 
|options.prefix?|string||Text to prefix all the generated CSS custom properties|
|aliases|`(tokens) => Object`|_Required_|Function to generate `theme.rules` having `options.tokens` passed as parameter, and `theme.aliases` as a JavaScript reference|

#### Return

|Property|Type|Description|
|-|-|-|
|theme.aliases|Object|Object containing the same keys as `aliases` parameter, but returning its CSS custom properties|
|theme.tokens|Object|Object containing the same keys as `options.tokens` parameter, but returning its CSS custom properties|
|theme.medias|Object|Object containing the `options.medias` to be also used as reference in JavaScript|

### unwrapAtom

#### Parameters

|Property|Type|Default|Description|
|-|-|-|-|
|atom|string|_Required_|Function to generate `theme.rules` having `options.tokens` passed as parameter, and `theme.aliases` as a JavaScript reference|

#### Return

|Property|Type|Description|
|-|-|-|
|atom|string|Object containing the same keys as `aliases` parameter, but returning its CSS custom properties|

### resolveAtom

#### Parameters

|Property|Type|Default|Description|
|-|-|-|-|
|atom|string|_Required_|Function to generate `theme.rules` having `options.tokens` passed as parameter, and `theme.aliases` as a JavaScript reference|

#### Return

|Property|Type|Description|
|-|-|-|
|atom|string|Object containing the same keys as `aliases` parameter, but returning its CSS custom properties|


## Usage

Create a file and provide any tokens and options based on the product's design system needs.

```ts
// @/lib/theme.ts

import themizer from 'themizer';

const theme = themizer(
  {
    // jv in this example stands to JoÃ£o Victor, my name
    prefix: 'jv',
    medias: {
      desktop: '(min-width: 1024px)',
      dark: '(prefers-color-scheme: dark)',
      motion: '(prefers-reduced-motion: no-preference)',
    },
    tokens: {
      alphas: {
        primary: 0.8,
      },
      units: {
        16: '1rem',
        24: '1.5rem',
        40: '2.5rem',
      },
      timing: {
        bounce: 'cubic-bezier(0.5, -0.5, 0.25, 1.5)',
      },
      duration: {
        fast: '200ms',
      },
      colors: {
        amber: {
          50: '#fffbf4',
          500: '245 158 11',
          950: '#100a01',
        },
      },
    },
  },
  (tokens) => ({
    palette: {
      main: {
        primary: `rgb(${tokens.colors.amber[500]} / ${tokens.alphas.primary})`,
      },
      foreground: [{ dark: tokens.colors.amber[50] }, tokens.colors.amber[950]],
      background: [{ dark: tokens.colors.amber[950] }, tokens.colors.amber[50]],
    },
    typography: {
      heading: [{ desktop: tokens.units[40] }, tokens.units[24]],
      body: tokens.units[16],
    },
    motion: {
      bounce: [{ motion: `${tokens.trans.duration.fast} ${tokens.trans.timing.bounce}` }],
    },
  }),
);
```

### Usage

#### Next.js and Talwind CSS

1. Customize Tailwind CSS' default theme with the generated by `themizer`.

```diff
/* tailwind.config.ts */

  import { type Config } from 'tailwindcss';
  import plugin from 'tailwindcss/plugin';
  import { type CSSRuleObject } from 'tailwindcss/types/config';

+ import theme from '@/lib/theme';

  const config = {
    content: ['./app/**/*.{tsx,ts,mdx}', './components/**/*.{tsx,ts,mdx}'],
    theme: {
      colors: {
        transparent: 'transparent',
        current: 'currentColor',
+       background: theme.aliases.palette.background,
+       foreground: theme.aliases.palette.foreground,
      },
      fontSize: {
+       heading: [theme.aliases.typography.heading, { lineHeight: theme.tokens.units[24] }],
+       body: [theme.aliases.typography.body],
      },
    },
+   plugins: [
+     plugin((api) => api.addBase(theme.rules.jss as CSSRuleObject)),
+   ],
  } satisfies Config;

  export default config;
```

2. The generated CSS custom properties will be accessed through the path `themizer/theme.css`, being indexed at the project's top-level file.

```diff
  import type { Metadata, Viewport } from 'next';

  import { Analytics } from '@vercel/analytics/react';
  import { SpeedInsights } from '@vercel/speed-insights/next';

+ import { resolveAtom } from 'themizer';
+ import 'themizer/theme.css'

+ import theme from '@/lib/theme';

  import './global.css';

  export const viewport: Viewport = {
    themeColor: [
      {
        media: '(prefers-color-scheme: dark)',
+       color: `rgb(${resolveAtom(theme.tokens.colors.amber[950])})`,
      },
      {
        media: '(prefers-color-scheme: light)',
+       color: `rgb(${resolveAtom(theme.tokens.colors.amber[50])})`,
      },
    ],
  };

  export default function AppLayout({ children }: React.PropsWithChildren) {
    return (
      <html
        lang="en"
        className="h-full bg-background text-body text-foreground antialiased"
      >
        <body className="flex h-full flex-col">
          <main className="m-auto">{children}</main>
          <Analytics />
          <SpeedInsights />
        </body>
      </html>
    );
  }
```

> Apply the class names normally to style anything. And don't worry, intellisense will charmingly work.

![Intellisense Example](intellisense-example.png)

3. Implement components using the generated theme.

```tsx
// @/components/Heading.tsx

export default function Heading({ className = '', ...props }: React.ComponentProps<'h1'>) {
  return <h1 className={`text-heading ${className}`} {...props} />
}
```

#### Next.js and styled-jsx (Next.js' built-in JSS solution)

1. Implement components using the generated theme.

```tsx
// @/components/Title.tsx

import theme from '@/lib/theme';

export default function Title({ children, className = '', ...props }: React.ComponentProps<'h1'>) {
  return (
    <h1 className={`heading ${className}`} {...props}>
      {children}
      <style jsx>{`
        .heading {
          font-size: ${theme.aliases.typography.heading};
        }
      `}</style>
    </h1>
  );
}
```

> Remember to create a **styled-jsx** [registry](https://nextjs.org/docs/app/building-your-application/styling/css-in-js#styled-jsx) to collect all CSS rules in a render and inject the theme rules in the document.
